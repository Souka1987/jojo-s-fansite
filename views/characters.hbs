{{!-- Page personnages --}}

<section class="mt-5">

    <div class="container">
        <h1 style="text-align: center;" class="display-4">Liste des personnages</h1>
        <p class="" style="text-align: center;">Et olim licet otiosae sint tribus pacataeque centuriae et nulla
            suffragiorum certamina set Pompiliani redierit securitas temporis, per omnes tamen quotquot sunt
            partes terrarum, ut domina suscipitur et regina et ubique patrum reverenda cum auctoritate canities.
        </p>

        {{!-- bar de recherche --}}
        <div class="form-group mb-4">
            <input id="myInput" type="text" onkeyup="myFunction()" placeholder="Qui recherchez-vous ?"
                class="form-control">
        </div>

        {{!-- Filtrage des personnages --}}
        <script>
            //déclaration de "myFunction"//
            function myFunction() {
                //déclaration des variables//
                var input, filter, h5, a, alt, ul, li, i, txtValue;
                //récupération de la balise "input"//
                input = document.getElementById("myInput");
                //lui attribuer la variable "filter"//
                filter = input.value.toUpperCase();
                //Récuperer la liste des éléments avec "ul"//
                ul = document.getElementById("myJojo");
                //"li" est l'enfant de "ul"//
                li = ul.getElementsByTagName("li");

                for (i = 0; i < li.length; i++) {
                    h5 = li[i].getElementsByTagName("h5")[0];
                    h5TxtValue = (h5.textContent || h5.innerText).toUpperCase().indexOf(filter) > -1;

                    btn = li[i].getElementsByTagName("button")[0];
                    btnTxtValue = (btn.textContent || btn.innerText).toUpperCase().indexOf(filter) > -1;

                    p = li[i].getElementsByTagName("p")[0];
                    pTxtValue = (p.textContent || p.innerText).toUpperCase().indexOf(filter) > -1;

                    if (h5TxtValue || btnTxtValue || pTxtValue) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            }
        </script>

        {{!-- Card  --}}
        <div class="container">
            <div class="row">
                <ul id="myJojo" class="row" style="margin: 5px;">
                    {{!-- Réduction des cards ici, 4 avec "limit" --}}
                    {{#each (limit character 4) }}
                    <li class="list-group-item">
                        <img src="{{ image }}" class="card-img-top" alt="">
                        <div class="card-body">
                            <a href="/admin/editCharacters/{{ _id }}">
                                <h5 class="card-title">{{ name }}</h5>
                            </a>
                            {{!-- Ajout de la variable "stripTags" ainsi que le contenu --}}
                            <p class="card-text">{{ content }}</p>
                            {{!-- Récupérer le "createDate" pour ajouter la date --}}
                            <p class="card-text"><small class="text-muted">Ajouté le:
                                    {{ moment createDate format="DD-MM-YYYY" }}</small></p>
                            {{!--  Button trigger modal  --}}
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                {{!-- Définir l'ID pour le lier au modal --}} data-target="#staticBackdrop{{ _id }}">
                                Plus
                            </button>
                            {{!-- /Button trigger modal --}}
                        </div>
                    </li>


                    {{!-- Modal --}}
                    <div class="modal fade" id="staticBackdrop{{ _id }}" data-backdrop="static" data-keyboard="false"
                        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title font-weight-bolder">...</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p class=""><img src="" height="" width="450">

                                        {{!-- card --}}
                                    <div>
                                        <img src="..." class="card-img-top" alt="...">
                                        <div>
                                            <h5>...</h5>
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.

                                            <h5>...</h5>
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.

                                            <h5>...</h5>
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.
                                        </div>
                                    </div>
                                    {{!-- /card --}}

                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">Fermer</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{!-- /Modal --}}
                    </div>
                    {{!-- Fin de la boucle --}}
                    {{/each }}
                </ul>
            </div>
        </div>
    </div>
</section>
{{!-- /Page personnages --}}


{{!--  Pagination  --}}
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
            <a class="page-link" href="#">Next</a>
        </li>
    </ul>
</nav>
{{!-- /Pagination --}}