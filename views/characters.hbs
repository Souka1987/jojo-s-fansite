{{!-- Page personnages --}}

<section class="mt-5">

    <div class="container">
        <h1 style="text-align: center;" class="display-4">Liste des personnages</h1>
        <p class="" style="text-align: center;">Et olim licet otiosae sint tribus pacataeque centuriae et nulla
            suffragiorum certamina set Pompiliani redierit securitas temporis, per omnes tamen quotquot sunt
            partes terrarum, ut domina suscipitur et regina et ubique patrum reverenda cum auctoritate canities.
        </p>

        {{!-- bar de recherche --}}
        <div class="form-group mb-4">
            <input id="myInput" type="text" onkeyup="myFunction()" placeholder="Qui recherchez-vous ?"
                class="form-control">
        </div>

        {{!-- Filtrage des personnages --}}
        <script>
            //déclaration de "myFunction"//
            function myFunction() {
                //déclaration des variables//
                var input, filter, h5, a, alt, ul, li, i, txtValue;
                //récupération de la balise "input"//
                input = document.getElementById("myInput");
                //lui attribuer la variable "filter"//
                filter = input.value.toUpperCase();
                //Récuperer la liste des éléments avec "ul"//
                ul = document.getElementById("myJojo");
                //"li" est l'enfant de "ul"//
                li = ul.getElementsByTagName("li");

                for (i = 0; i < li.length; i++) {
                    h5 = li[i].getElementsByTagName("h5")[0];
                    h5TxtValue = (h5.textContent || h5.innerText).toUpperCase().indexOf(filter) > -1;

                    btn = li[i].getElementsByTagName("button")[0];
                    btnTxtValue = (btn.textContent || btn.innerText).toUpperCase().indexOf(filter) > -1;

                    p = li[i].getElementsByTagName("p")[0];
                    pTxtValue = (p.textContent || p.innerText).toUpperCase().indexOf(filter) > -1;

                    if (h5TxtValue || btnTxtValue || pTxtValue) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            }
        </script>

        {{!-- Card  --}}
        <div>
            <ul id="myJojo" class="row">
                {{!-- Réduction des cards ici, 4 avec "limit" --}}
                {{#each character }}
                <li class="col-xl-3 col-lg-4 col-md-6 mb-4 list-group-item">
                    <div class="bg-white">
                        <a href=""></a>
                        <img src="{{ image }}" alt="Jonathan" class="img-fluid card-img">
                        <div class="p-4">
                            <div class="">
                                <h5>{{ name }}</h5>
                                <p>{{ _id }}</p>
                            </div>
                            {{!-- Ajout de la variable "stripTags" ainsi que le contenu --}}
                            <p>{{ content }}</p>
                            <div
                                class="d-flex align-items-center justify-content-between rounded-pill bg-light px-3 py-2 mt-4">
                                {{!--  Button trigger modal  --}}
                                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                                {{!-- Définir l'ID pour le lier au modal --}}
                                    data-target="#staticBackdrop{{ _id }}"> Capacité
                                </button>
                                {{!-- /Button trigger modal --}}
                            </div>
                        </div>
                    </div>
                </li>

                {{!-- Modal --}}
                <div class="modal fade" id="staticBackdrop{{ _id }}" data-backdrop="static" data-keyboard="false" tabindex="-1"
                    aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title font-weight-bolder">{{ name }}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p class=""><img src="{{ image }}" height=""
                                        width="450">
                                    <!--Rate-->
                                <div class="rating float:right">
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                </div>
                                <!--/Rate-->
                                <div id="accordion">
                                    <div class="card">
                                        <div class="card-header" id="headingOne">
                                            <h5 class="mb-0">
                                                <button class="btn " data-toggle="collapse" data-target="#collapseOne"
                                                    aria-expanded="true" aria-controls="collapseOne">
                                                    Spécificité
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                            data-parent="#accordion">
                                            <div class="card-body">
                                                ...
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <h5 class="mb-0">
                                                <button class="btn collapsed" data-toggle="collapse"
                                                    data-target="#collapseThree" aria-expanded="false"
                                                    aria-controls="collapseThree">
                                                    Histoire
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                                            data-parent="#accordion">
                                            <div class="card-body">
                                                ...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary btn-sm"
                                        data-dismiss="modal">Fermer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{!-- /Modal --}}
                </div>
                {{!-- Fin de la boucle --}}
                {{/each }}
            </ul>
        </div>
    </div>
</section>
{{!-- /Page personnages --}}


<!-- Pagination -->
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
            <a class="page-link" href="#">Next</a>
        </li>
    </ul>
</nav>
<!--/Pagination-->