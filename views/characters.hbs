{{!-- Page personnages --}}
<section class="mt-5">
    <div class="container">
        <h1 style="text-align: center;" class="">Liste des personnages</h1>
        <p class="text small" style="text-align: center;">Et olim licet otiosae sint tribus pacataeque centuriae et
            nulla <br>
            suffragiorum certamina set Pompiliani redierit securitas temporis, <br> per omnes tamen quotquot sunt
            partes terrarum, ut domina suscipitur et regina <br> et ubique patrum reverenda cum auctoritate canities.
        </p>

        {{!-- bar de recherche --}}
        <div class="form-group mb-4">
            <input id="myInput" type="text" onkeyup="myFunction()" placeholder="Qui recherchez-vous ?"
                class="form-control">
        </div>

        {{!-- Filtrage des personnages --}}
        <script>
            //déclaration de "myFunction"//
            function myFunction() {
                //déclaration des variables//
                var input, filter, h5, a, alt, ul, li, i, txtValue;
                //récupération de la balise "input"//
                input = document.getElementById("myInput");
                //lui attribuer la variable "filter"//
                filter = input.value.toUpperCase();
                //Récuperer la liste des éléments avec "ul"//
                ul = document.getElementById("myJojo");
                //"li" est l'enfant de "ul"//
                li = ul.getElementsByTagName("li");

                for (i = 0; i < li.length; i++) {
                    h5 = li[i].getElementsByTagName("h5")[0];
                    h5TxtValue = (h5.textContent || h5.innerText).toUpperCase().indexOf(filter) > -1;

                    btn = li[i].getElementsByTagName("button")[0];
                    btnTxtValue = (btn.textContent || btn.innerText).toUpperCase().indexOf(filter) > -1;

                    p = li[i].getElementsByTagName("p")[0];
                    pTxtValue = (p.textContent || p.innerText).toUpperCase().indexOf(filter) > -1;

                    if (h5TxtValue || btnTxtValue || pTxtValue) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            }
        </script>

        {{!-- Card  --}}
        
        <div class="container justify-content-center">
            <div class="card-deck">
                <div class="card mb-4">
                    <ul id="myJojo" class="row">
                        {{#each character }}
                        <li class="list-group-item col m-2 p-0 rounded shadow">
                            <div id="characters" class="rounded card-img-top img-fluid"
                                style="background-image: url({{image}})"></div>

                            <style>
                                #characters {
                                    background-repeat: no-repeat;
                                    background-position: center;
                                    height: 200px;
                                    width: auto;
                                    background-size: cover;
                                    content: none;
                                }

                                .row {
                                    display: flex;
                                    flex: 1 0 auto;
                                }
                            </style>


                            <div class="card-body">
                                <h6 class="card-title text-center">{{ name }}</h6>
                                {{!-- Ajout de la variable "stripTags" ainsi que le contenu --}}
                                <p class="card-text scroll text-justify">{{ stripTags content }}</p>


                                {{!--  Button trigger modal  --}}
                                <div class="text-center">
                                    <button type="button" class="btn" data-toggle="modal"
                                        {{!-- Définir l'ID pour le lier au modal --}}
                                        data-target="#exampleModalLong{{ _id }}">
                                        Faculté
                                    </button>
                                </div>
                                {{!-- /Button trigger modal --}}

                                <div class="card-footer mt-2">
                                    {{!-- Récupérer le "createDate" pour ajouter la date --}}
                                    <p class="card-text text-center"><small class="text-muted">Ajouté le:
                                            {{ moment createDate format="DD.MM.YYYY" }}</small></p>
                                </div>
                            </div>
                        </li>

                        {{!-- Modal --}}
                        <div class="modal fade " id="exampleModalLong{{ _id }}" data-backdrop="static"
                            data-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLongTitle"
                            aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title font-weight-bolder" id="exampleModalLongTitle">
                                            {{ powers.name }}
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <div id="powers" class="rounded" style="background-image: url({{powers.image}})">
                                    </div>
                                    <style>
                                        #powers {
                                            background-repeat: no-repeat;
                                            background-position: top;
                                            height: 500px;
                                            width: auto;
                                            background-size: cover;

                                        }
                                    </style>
                                    <div class="modal-body p-1">
                                        {{!-- <img src="" alt=""> --}}
                                        <div class="list-group text-center mt-5">
                                            <p class="list-group-item small rounded alert alert-info">
                                                {{ stripTags powers.content1  }}</p>
                                            <div class="list-group-item lead1 bold">{{ powers.title2 }}</div>
                                            <p class="list-group-item content2 small">{{ stripTags powers.content2 }}
                                            </p>
                                            <div class="list-group-item lead2 bold">{{ powers.title2 }}</div>
                                            <p class="list-group-item content3 small"> {{ stripTags powers.content3 }}
                                            </p>
                                        </div>
                                    </div>
                                    {{!-- /card --}}
                                    <div class="modal-footer">
                                        <button type="button" class="btn" data-dismiss="modal">Fermer</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{!-- Fin de la boucle --}}
                        {{/each }}
                    </ul>
                </div>
            </div>
        </div>
        {{!--  Pagination  --}}

        <div id="pagination">
            <ul class="pagination justify-content-center">
                {{paginateHelper pagination firstText="First"}}
                <li {{#if disabled}}class="disabled" {{/if}}><a class="page-link" href="?p={{n}}">First</a></li>
                {{paginateHelper pagination leftText="Prev"}}
                <li {{#if disabled}}class="disabled" {{/if}}><a class="page-link" href="?p={{n}}">Prev</a></li>
                {{paginateHelper pagination limit="7"}}
                <li {{#if active}}class="active" {{/if}}><a class="page-item" href="?p={{n}}">{{n}}</a></li>
                {{paginateHelper pagination rightText="Next"}}
                <li {{#if disabled}}class="disabled" {{/if}}><a class="page-link" href="?p={{n}}">Next</a></li>
                {{paginateHelper pagination lastText="Last"}}
                <li {{#if disabled}}class="disabled" {{/if}}><a class="page-link" href="?p={{n}}">Last</a></li>
            </ul>
        </div>
        {{!-- /Pagination --}}
    </div>
</section>
{{!-- /Page personnages --}}




<style>
    /* CARD PERSONNAGES*/
    /*.rounded {
        border-radius: .55rem !important;
    }*/

    .card-title {
        color: #191941;
        font-weight: bold;
    }

    .card-footer {
        padding: .75rem 1.25rem;
        background-color: white;
        border-top: none
    }

    .btn {
        position: relative;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        outline: none;
        background: linear-gradient(90deg, #FF1178, #FE0000, #FFF205, #FF1178);
        box-shadow: 6px 6px 12px #b8b9be, -6px -6px 12px #fff;
        background-size: 400%;
        color: #fff;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
    }

    .scroll {
        max-height: 100px;
        overflow-y: auto;
        font-size: 12px;
        font-weight: 500;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1;
        background: linear-gradient(90deg, #FF1178, #FE0000, #FFF205, #FF1178);
        background-size: 400%;
        border-radius: 50px;
        opacity: 0;
        transition: .5s;
    }

    .btn:hover {
        animation: animate 10s linear infinite;
        color: white;
    }

    .btn:hover::before {
        filter: blur(25px);
        opacity: .8;
        animation: animate 10s linear infinite;
    }

    @keyframes animate {
        0% {
            background-position: 0%;
        }

        100% {
            background-position: 400%;
        }
    }

    h1 {
        color: #191941;
        font-family: "Nunito", sans-serif;
        letter-spacing: .015rem;
        margin-top: 0;
        font-size: 50px;
        position: relative;
        z-index: 1;
        /*text-shadow: 2px 2px 4px #e2e6fc, -2px -2px 4px #fff;*/
        font-weight: 800;
        text-transform: uppercase;
    }

    .text {
        font-weight: 500;
        color: #656774;
    }

    /*MODAL POWERS*/

    h6 {
        text-transform: uppercase;
        color: #191941;
    }

    .modal-content {
        position: relative;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 1px solid rgba(0, 0, 0, .125);
        border-radius: .25rem;
    }

    .text-muted {
        font-size: 10px;
    }

    .card {
        position: relative;
    }

    .top {
        background: black;
    }

    .content2,
    .lead1 {
        background: #f5f5f5;
    }

    .content3,
    .lead2 {
        background: #f5f5f5;
    }

    .modal-content {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        background-color: #fff;
    }
</style>