{{!-- Page personnages --}}
<section class="mt-5">
    <div class="container">
        <h1 class="text-center">Liste des personnages et de leurs capacités respectives.</h1>
        <p class="text-center mt-5">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
            dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex
            ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat
            nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit
            anim id est laborum
        </p>

        {{!-- bar de recherche --}}
        <div class="form-group mb-4 mt-5">
            <input id="myInput" type="text" onkeyup="myFunction()" placeholder="Qui recherchez-vous ?"
                class="form-control">
        </div>

        {{!-- Filtrage des personnages --}}
        <script>
            //déclaration de "myFunction"//
            function myFunction() {
                //déclaration des variables//
                var input, filter, h5, a, alt, ul, li, i, txtValue;
                //récupération de la balise "input"//
                input = document.getElementById("myInput");
                //lui attribuer la variable "filter"//
                filter = input.value.toUpperCase();
                //Récuperer la liste des éléments avec "ul"//
                ul = document.getElementById("myJojo");
                //"li" est l'enfant de "ul"//
                li = ul.getElementsByTagName("li");

                for (i = 0; i < li.length; i++) {
                    h5 = li[i].getElementsByTagName("h5")[0];
                    h5TxtValue = (h5.textContent || h5.innerText).toUpperCase().indexOf(filter) > -1;

                    btn = li[i].getElementsByTagName("button")[0];
                    btnTxtValue = (btn.textContent || btn.innerText).toUpperCase().indexOf(filter) > -1;

                    p = li[i].getElementsByTagName("p")[0];
                    pTxtValue = (p.textContent || p.innerText).toUpperCase().indexOf(filter) > -1;

                    if (h5TxtValue || btnTxtValue || pTxtValue) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            }
        </script>

        {{!-- Card --}}

        <div class="container">
            <ul id="myJojo" class="row">
                {{#each character }}
                <li class="list-group-item col-sm-6 col-md-6 col-lg-4  p-0 rounded">
                    <div id="characters" class="rounded card-img-top img-fluid"
                        style="background-image: url({{image}})"></div>
                    <div class="card-body">
                        <h5 class="card-title text-center font-weight-bolder">{{ name }}</h5>
                        {{!-- Ajout de la variable "stripTags" ainsi que le contenu --}}
                        <p class=" text-justify">{{{ stripTags content }}}</p>


                        {{!-- Button trigger modal --}}
                        <div class="text-center">
                            <button type="button" class="btn btn-primary" data-toggle="modal" {{!-- Définir l'ID pour le lier au
                                    modal --}} data-target="#exampleModalLong{{ _id }}">
                                Faculté
                            </button>
                        </div>
                        {{!-- /Button trigger modal --}}

                        <div class="card-footer mt-2">
                            {{!-- Récupérer le "createDate" pour ajouter la date --}}
                            <p class="card-text text-center"><small class="text-muted">Ajouté le:
                                    {{ moment createDate format="DD.MM.YYYY" }}</small></p>
                        </div>
                    </div>
                </li>

                {{!-- Modal --}}
                <div class="modal fade" id="exampleModalLong{{ _id }}" data-backdrop="static" data-keyboard="false"
                    tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div id="powers" class="rounded p-0" style="background-image: url({{powers.image}})">
                            </div>
                            <div class="modal-body p-1">
                                {{!-- <img src="" alt=""> --}}
                                <div class="list-group text-center mt-5">
                                    <h4 class="modal-title font-weight-bolder">
                                        {{ powers.name }}
                                    </h4>
                                    <p class="mt-2">
                                        {{{ stripTags powers.content1 }}}</p>
                                    <h5 class="mt-5"> <span> Type:</span> {{ powers.title1 }}</h5>
                                    <hr>
                                    <p class="mt-2">{{{ stripTags powers.content2 }}}
                                    </p>
                                    <h5 class="mt-5">{{ powers.title2 }}</h5>
                                    <hr>
                                    <p class="mt-2"> {{{ stripTags powers.content3 }}}
                                    </p>
                                </div>
                            </div>
                            {{!-- /card --}}
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
                {{!-- Fin de la boucle --}}
                {{/each }}
            </ul>
        </div>
    </div>
</section>
{{!-- /Page personnages --}}